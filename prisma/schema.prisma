// ============================================================================
// Prisma Schema File
// ============================================================================
// This file defines the database schema and configuration for Prisma ORM.
// Prisma is a modern database toolkit that provides:
// 1. Type-safe database client (Prisma Client)
// 2. Database migrations (Prisma Migrate)
// 3. Visual database browser (Prisma Studio)
//
// Learn more: https://pris.ly/d/prisma-schema
// ============================================================================

// ----------------------------------------------------------------------------
// Generator Configuration
// ----------------------------------------------------------------------------
// The generator block tells Prisma to generate the Prisma Client library.
// This client provides type-safe database access methods for your models.
generator client {
  provider = "prisma-client-js"  // Generates JavaScript/TypeScript client
}

// ----------------------------------------------------------------------------
// Datasource Configuration
// ----------------------------------------------------------------------------
// The datasource block defines how Prisma connects to your database.
//
// How Prisma connects to Neon PostgreSQL:
// 1. Prisma reads the DATABASE_URL from your .env file (configured in prisma.config.ts)
// 2. It establishes a connection to your Neon PostgreSQL database using this URL
// 3. The connection string includes authentication (username/password) and SSL settings
// 4. Neon provides a serverless PostgreSQL database with automatic scaling
//
// Communication flow:
// Your App → Prisma Client → Prisma Query Engine → PostgreSQL Protocol → Neon Database
//
// The connection is pooled and managed by Prisma for optimal performance.
// Note: In Prisma 7+, the connection URL is configured in prisma.config.ts
datasource db {
  provider = "postgresql"           // Database type (PostgreSQL for Neon)
}

// ----------------------------------------------------------------------------
// Item Model (SaleItem)
// ----------------------------------------------------------------------------
// This model represents the "Item" table in your PostgreSQL database.
// Prisma will create this table when you run migrations.
//
// Updated to match frontend SaleItem interface with additional fields:
// - Changed id from Int to String (UUID) for better scalability
// - Added quantity, unitPrice, category for sales tracking
// - Added date field for sale date tracking
// - Added ownerID field for JWT-based role control and multi-tenancy
// - All new fields have default values to allow smooth migration from existing data
//
// Each field maps to a column in the database table:
// - Field name = Column name
// - Field type = Column data type
// - Attributes (@id, @default, etc.) = Column constraints and defaults
model Item {
  id          String   @id @default(uuid())                      // Primary key, UUID for better scalability
  name        String   @default("item")                          // Default value: "item"
  description String   @default("item description")              // Default value: "item description"
  quantity    Int      @default(1)                               // Default value: 1
  unitPrice   Float    @default(0.0)                             // Default value: 0.0
  category    String   @default("Temporary")                     // Default value: "Temporary"
  date        DateTime @default(now())                           // Default value: current timestamp
  ownerID     String   @default("admin-1")                       // Default value: "admin-1" (for JWT role-based access)
  createdAt   DateTime @default(now())                           // Timestamp when record is created
  updatedAt   DateTime @updatedAt                                // Timestamp, auto-updates on changes

  // Index on ownerID for faster queries when filtering by user
  @@index([ownerID])
  // Index on date for faster queries when filtering by date range
  @@index([date])
  // Index on category for faster queries when filtering by category
  @@index([category])

  // The @@map attribute would allow you to use a different table name in the database
  // Example: @@map("items") would create a table named "items" instead of "Item"
}
